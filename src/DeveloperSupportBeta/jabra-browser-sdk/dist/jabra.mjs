var e,t,n="2.1.0.beta1",r=n.includes("beta"),i="okpeabepajdgiepelmhkfhkjlhhmofma",o="igcbbdnhomedfadljgcmcfpdcoonihfe",a=["devices","activedevice","getinstallinfo","Version","setmmifocus","setactivedevice2","setbusylight","setremotemmilightaction"];!function(e){e[e.NoError=0]="NoError",e[e.SSLError=1]="SSLError",e[e.CertError=2]="CertError",e[e.NetworkError=3]="NetworkError",e[e.DownloadError=4]="DownloadError",e[e.ParseError=5]="ParseError",e[e.OtherError=6]="OtherError",e[e.DeviceInfoError=7]="DeviceInfoError",e[e.FileNotAccessible=8]="FileNotAccessible",e[e.FileNotCompatible=9]="FileNotCompatible",e[e.Device_NotFound=10]="Device_NotFound",e[e.Parameter_fail=11]="Parameter_fail",e[e.Authorization_failed=12]="Authorization_failed",e[e.FileNotAvailable=13]="FileNotAvailable",e[e.ConfigParseError=14]="ConfigParseError",e[e.SetSettings_Fail=15]="SetSettings_Fail",e[e.Device_Reboot=16]="Device_Reboot",e[e.Device_ReadFail=17]="Device_ReadFail",e[e.Device_NotReady=18]="Device_NotReady",e[e.FilePartiallyCompatible=19]="FilePartiallyCompatible"}(e||(e={})),function(e){e[e.Return_Ok=0]="Return_Ok",e[e.Device_Unknown=1]="Device_Unknown",e[e.Device_Invalid=2]="Device_Invalid",e[e.Not_Supported=3]="Not_Supported",e[e.Return_ParameterFail=4]="Return_ParameterFail",e[e.ProtectedSetting_Write=5]="ProtectedSetting_Write",e[e.No_Information=6]="No_Information",e[e.NetworkRequest_Fail=7]="NetworkRequest_Fail",e[e.Device_WriteFail=8]="Device_WriteFail",e[e.Device_ReadFails=9]="Device_ReadFails",e[e.No_FactorySupported=10]="No_FactorySupported",e[e.System_Error=11]="System_Error",e[e.Device_BadState=12]="Device_BadState",e[e.FileWrite_Fail=13]="FileWrite_Fail",e[e.File_AlreadyExists=14]="File_AlreadyExists",e[e.File_Not_Accessible=15]="File_Not_Accessible",e[e.Firmware_UpToDate=16]="Firmware_UpToDate",e[e.Firmware_Available=17]="Firmware_Available",e[e.Return_Async=18]="Return_Async",e[e.Invalid_Authorization=19]="Invalid_Authorization",e[e.FWU_Application_Not_Available=20]="FWU_Application_Not_Available",e[e.Device_AlreadyConnected=21]="Device_AlreadyConnected",e[e.Device_NotConnected=22]="Device_NotConnected",e[e.CannotClear_DeviceConnected=23]="CannotClear_DeviceConnected",e[e.Device_Rebooted=24]="Device_Rebooted",e[e.Upload_AlreadyInProgress=25]="Upload_AlreadyInProgress",e[e.Download_AlreadyInProgress=26]="Download_AlreadyInProgress"}(t||(t={}));var s,u,c,l,v=function(e){function t(t,n,r){e.call(this,"Command "+t+" failed with error  message "+n+" and details: "+JSON.stringify(r||{})),this.command=t,this.errmessage=n,this.data=r,this.name="CommandError"}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),d=new Map;["mute","unmute","device attached","device detached","acceptcall","endcall","reject","flash","online","offline","linebusy","lineidle","redial","key0","key1","key2","key3","key4","key5","key6","key7","key8","key9","keyStar","keyPound","keyClear","Online","speedDial","voiceMail","LineBusy","outOfRange","intoRange","pseudoAcceptcall","pseudoEndcall","button1","button2","button3","volumeUp","volumeDown","fireAlarm","jackConnection","jackDisConnection","qdConnection","qdDisconnection","headsetConnection","headsetDisConnection","devlog","busylight","hearThrough","batteryStatus","gnpButton","mmi","error"].forEach(function(e){return d.set(e,[])}),function(e){e[e.BusyLight=1e3]="BusyLight",e[e.FactoryReset=1001]="FactoryReset",e[e.PairingList=1002]="PairingList",e[e.RemoteMMI=1003]="RemoteMMI",e[e.MusicEqualizer=1004]="MusicEqualizer",e[e.EarbudInterconnectionStatus=1005]="EarbudInterconnectionStatus",e[e.StepRate=1006]="StepRate",e[e.HeartRate=1007]="HeartRate",e[e.RRInterval=1008]="RRInterval",e[e.RingtoneUpload=1009]="RingtoneUpload",e[e.ImageUpload=1010]="ImageUpload",e[e.NeedsExplicitRebootAfterOta=1011]="NeedsExplicitRebootAfterOta",e[e.NeedsToBePutIncCradleToCompleteFwu=1012]="NeedsToBePutIncCradleToCompleteFwu",e[e.RemoteMMIv2=1013]="RemoteMMIv2",e[e.Logging=1014]="Logging",e[e.PreferredSoftphoneListInDevice=1015]="PreferredSoftphoneListInDevice",e[e.VoiceAssistant=1016]="VoiceAssistant",e[e.PlayRingtone=1017]="PlayRingtone"}(s||(s={})),function(e){e[e.MMI_TYPE_MFB=0]="MMI_TYPE_MFB",e[e.MMI_TYPE_VOLUP=1]="MMI_TYPE_VOLUP",e[e.MMI_TYPE_VOLDOWN=2]="MMI_TYPE_VOLDOWN",e[e.MMI_TYPE_VCB=3]="MMI_TYPE_VCB",e[e.MMI_TYPE_APP=4]="MMI_TYPE_APP",e[e.MMI_TYPE_TR_FORW=5]="MMI_TYPE_TR_FORW",e[e.MMI_TYPE_TR_BACK=6]="MMI_TYPE_TR_BACK",e[e.MMI_TYPE_PLAY=7]="MMI_TYPE_PLAY",e[e.MMI_TYPE_MUTE=8]="MMI_TYPE_MUTE",e[e.MMI_TYPE_HOOK_OFF=9]="MMI_TYPE_HOOK_OFF",e[e.MMI_TYPE_HOOK_ON=10]="MMI_TYPE_HOOK_ON",e[e.MMI_TYPE_BLUETOOTH=11]="MMI_TYPE_BLUETOOTH",e[e.MMI_TYPE_JABRA=12]="MMI_TYPE_JABRA",e[e.MMI_TYPE_BATTERY=13]="MMI_TYPE_BATTERY",e[e.MMI_TYPE_PROG=14]="MMI_TYPE_PROG",e[e.MMI_TYPE_LINK=15]="MMI_TYPE_LINK",e[e.MMI_TYPE_ANC=16]="MMI_TYPE_ANC",e[e.MMI_TYPE_LISTEN_IN=17]="MMI_TYPE_LISTEN_IN",e[e.MMI_TYPE_DOT3=18]="MMI_TYPE_DOT3",e[e.MMI_TYPE_DOT4=19]="MMI_TYPE_DOT4",e[e.MMI_TYPE_ALL=255]="MMI_TYPE_ALL"}(u||(u={})),function(e){e[e.MMI_LED_SEQUENCE_OFF=0]="MMI_LED_SEQUENCE_OFF",e[e.MMI_LED_SEQUENCE_ON=1]="MMI_LED_SEQUENCE_ON",e[e.MMI_LED_SEQUENCE_SLOW=2]="MMI_LED_SEQUENCE_SLOW",e[e.MMI_LED_SEQUENCE_FAST=3]="MMI_LED_SEQUENCE_FAST"}(c||(c={})),function(e){e[e.MMI_ACTION_UP=1]="MMI_ACTION_UP",e[e.MMI_ACTION_DOWN=2]="MMI_ACTION_DOWN",e[e.MMI_ACTION_TAP=4]="MMI_ACTION_TAP",e[e.MMI_ACTION_DOUBLE_TAP=8]="MMI_ACTION_DOUBLE_TAP",e[e.MMI_ACTION_PRESS=16]="MMI_ACTION_PRESS",e[e.MMI_ACTION_LONG_PRESS=32]="MMI_ACTION_LONG_PRESS",e[e.MMI_ACTION_X_LONG_PRESS=64]="MMI_ACTION_X_LONG_PRESS"}(l||(l={}));var p=2,f=new(function(){function e(){}return e.prototype.trace=function(e){p>=4&&console.log(e)},e.prototype.info=function(e){p>=3&&console.log(e)},e.prototype.warn=function(e){p>=2&&console.warn(e)},e.prototype.error=function(e){p>=1&&console.error(e)},e}()),m=Math.random().toString(36).substr(2,9),_=new Map,g=1,h={};function y(){return new Promise(function(e,t){if(!/Chrome/.test(navigator.userAgent)||!/Google Inc/.test(navigator.vendor))return t(new Error("Jabra Browser Integration: Only supported by <a href='https://google.com/chrome'>Google Chrome</a>."));if(h.initialized||h.initializing)return t(new Error("Jabra Browser Integration already initialized"));h.initializing=!0,_.clear();var s=!0;function u(e,t){var n=d.get(e);n?n.forEach(function(e){e(t)}):f.error("Unexpected unknown eventName: "+e)}function c(e){var t;if(e)t=_.get(e),_.delete(e);else if(1===_.size){var n=_.entries().next().value;t=n[1],_.delete(n[0])}else t=void 0;var r=_.size;return r>10&&r%10==0&&f.warn("Memory leak found - Request result map is getting too large (size #"+r+")"),t}h.eventCallback=function(r){if(r.source===window&&r.data.direction&&"jabra-headset-extension-from-content-script"===r.data.direction){var i=r.data.apiClientId||"",o=r.data.requestId||"";if(m===i||""===i)if(f.trace("Receiving event from content script: "+JSON.stringify(r.data)),"na"===r.data.message&&delete r.data.message,r.data.message&&r.data.message.startsWith("Error:")&&(r.data.error=r.data.message,delete r.data.message),r.data.message){f.trace("Got message: "+JSON.stringify(r.data));var l=r.data.message.substring(7);if(l.startsWith("logLevel"))return p=parseInt(r.data.message.substring(16)),void f.trace("Logger set to level "+p);var _=a.findIndex(function(e){return l.startsWith(e)});if(_>=0){("getinstallinfo"===l||l.startsWith("Version "))&&(r.data.data||(r.data.data={}),r.data.data.version_jsapi=n),"getinstallinfo"===l&&(r.data.data.installationOk=!((P=[(b=r.data.data).version_browserextension,b.version_chromehost,b.version_jsapi]).some(function(e){return!e})||!b.version_nativesdk||!P.map(function(e){var t=e.lastIndexOf("beta");return t>=0&&e.length>t+4?e.substr(t+4):void 0}).filter(function(e){return e}).every(function(e,t,n){return e===n[0]})));var g=c(o);if(g){var h;if(r.data.data)h=r.data.data;else{var y=l.substring(a[_].length+1);h={},y&&(h.legacy_result=y)}g.resolve(h)}else{var E="Result target information missing for message "+r.data.message+". This is likely due to some software components that have not been updated or a software bug. Please upgrade extension and/or chromehost";f.error(E),u("error",{error:E,message:r.data.message})}}else{if(!d.has(l))return f.warn("Unknown message: "+r.data.message),void u("error",{error:"Unknown message: ",message:r.data.message});var M=JSON.parse(JSON.stringify(r.data));delete M.direction,delete M.apiClientId,delete M.requestId,M.message=l,u(l,M)}if(s)return s=!1,e()}else if(r.data.error){f.error("Got error: "+r.data.error);var I=r.data.error.substring(7),T=c(o);if(T)T.reject(new v(T.cmd,I,r.data.data));else{var w=JSON.parse(JSON.stringify(r.data));delete w.direction,delete w.apiClientId,delete w.requestId,w.error=I,u("error",w)}if(s)return s=!1,t(new Error(r.data.error))}}var b,P},window.addEventListener("message",h.eventCallback),setTimeout(function(){z("getversion",null,!1).then(function(e){var t="string"==typeof e||e instanceof String?e:JSON.stringify(e,null,2);f.trace("getversion returned successfully with : "+t),B("logLevel",null,!1)}).catch(function(e){f.error(e)})},1e3),setTimeout(function(){!0===s&&(s=!1,t(new Error("Jabra Browser Integration: You need to use this <a href='https://chrome.google.com/webstore/detail/"+(r?o:i)+"'>Extension</a> and then reload this page")))},5e3),h.initialized=!0,h.initializing=!1})}function E(){return h.initialized?(window.removeEventListener("message",h.eventCallback),h.eventCallback=void 0,_.clear(),g=1,h.initialized=!1,d.forEach(function(e,t){}),Promise.resolve()):Promise.reject(new Error("Browser integration not initialized"))}function M(e){return Array.isArray(e)?[].concat(new Set([].concat.apply([],e.map(function(e){return M(e)})))):e instanceof RegExp?Array.from(d.keys()).filter(function(t){return e.test(t)}):d.has(e)?[e]:(f.warn("Unknown event "+e+" ignored when adding/removing eventlistener"),[])}function I(e,t){M(e).map(function(e){var n=d.get(e);n.find(function(e){return e===t})||n.push(t)})}function T(e,t){M(e).map(function(e){var n=d.get(e),r=n.findIndex(function(e){return e===t});r>=0&&n.splice(r,1)})}function w(){B("ring")}function b(){B("offhook")}function P(){B("onhook")}function A(){B("mute")}function O(){B("unmute")}function S(){B("hold")}function N(){B("resume")}function C(e,t){return z("setmmifocus",{type:K(e),capture:X(t)})}function D(e,t,n){return z("setremotemmilightaction",{type:K(e),color:function(e){if(""!==e&&("string"==typeof e||e instanceof String)){var t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]}if("number"==typeof e)return[e>>16&255,e>>8&255,255&e];if(Array.isArray(e)){if(3!=e.length)throw new Error("Illegal argument - wrong dimension of number array (3 expected)");return e}throw new Error("Illegal/missing argument - number array or hex string expected")}(t),effect:K(n)})}function x(){return z("getactivedevice")}function k(){return z("getdevices")}function L(e){return void 0===e&&(e=!1),X(e)?G():x()}function R(e){return void 0===e&&(e=!1),X(e)?navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?h.initialized?"https:"!==location.protocol?Promise.reject(new Error("Your browser needs https for lookup to work")):Promise.all([k(),navigator.mediaDevices.enumerateDevices()]).then(function(e){var t=e[0],n=e[1];return t.forEach(function(e){V(e,n)}),t}):Promise.reject(new Error("Browser integration not initialized")):Promise.reject(new Error("Your browser does not support required media api")):k()}function F(e){var t=K(e);B("setactivedevice "+e.toString(),{id:t})}function Y(e){return z("setactivedevice2",{id:K(e)})}function U(e){return z("setbusylight",{busy:X(e)})}function j(){return z("getinstallinfo")}function B(e,t,r){if(void 0===t&&(t=null),void 0===r&&(r=!0),!(!r||r&&h.initialized))throw new Error("Browser integration not initialized");var i={direction:"jabra-headset-extension-from-page-script",message:e,args:t||{},requestId:(g++).toString(),apiClientId:m,version_jsapi:n};f.trace("Sending command to content script: "+JSON.stringify(i)),window.postMessage(i,"*")}function z(e,t,r){if(void 0===t&&(t=null),void 0===r&&(r=!0),!r||r&&h.initialized){var i=(g++).toString();return new Promise(function(r,o){_.set(i,{cmd:e,resolve:r,reject:o});var a={direction:"jabra-headset-extension-from-page-script",message:e,args:t||{},requestId:i,apiClientId:m,version_jsapi:n};f.trace("Sending command to content script expecting result: "+JSON.stringify(a)),window.postMessage(a,"*")})}return Promise.reject(new Error("Browser integration not initialized"))}function W(e,t){return e&&t?"function"!=typeof e.setSinkId?Promise.reject(new Error("Your browser does not support required Audio Output Devices API")):e.setSinkId(t.browserAudioOutputId).then(function(){return e.sinkId===t.browserAudioOutputId}):Promise.reject(new Error("Call to trySetDeviceOutput has argument(s) missing"))}function q(e,t){if(!e||!t)throw Error("Call to isDeviceSelectedForInput has argument(s) missing");for(var n=e.getAudioTracks(),r=0,i=n.length;r<i;r++)if(n[r].getCapabilities().deviceId!==t.browserAudioInputId)return!1;return!0}function J(e){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return Promise.reject(new Error("Your browser does not support required media api"));if(!h.initialized)return Promise.reject(new Error("Browser integration not initialized"));if("https:"!==location.protocol&&f.warn("This function needs to run under https for best UX experience (persisted permissions)"),null!=e&&"object"!=typeof e)return Promise.reject(new Error("Optional constraints parameter must be an object"));function t(e,n){if(null!=n&&"object"==typeof e){var r={};for(var i in n)r[i]=n[i];for(var i in e)r[i]=t(e[i],n[i]);return r}return e}return navigator.mediaDevices.getUserMedia(t({audio:!0},e)).then(function(n){return G().then(function(r){return n.getTracks().forEach(function(e){e.stop()}),r&&r.browserAudioInputId?navigator.mediaDevices.getUserMedia(t({audio:{deviceId:r.browserAudioInputId}},e)).then(function(e){return{stream:e,deviceInfo:r}}):Promise.reject(new Error("Could not find a Jabra device with a microphone"))})})}function V(e,t){function n(e,t,n){return n.find(function(n){return n.groupId==e&&n.kind==t})}if(e&&e.deviceName){var r=void 0,i=void 0,o=void 0,a=void 0,s=t.filter(function(e){return e.label&&e.label.toLowerCase().includes("jabra")&&("audioinput"===e.kind||"audiooutput"===e.kind)}),u=(d=e.deviceName,1==(p=s.map(function(e){return e.label})).length?0:p.length>0?p.map(function(e){if(e.includes("("+d+")"))return 1;var t=e.indexOf(" - "),n=t>=0?e.substring(t+3):e;return function(e,t){var r=d,i=n;d.length<n.length&&(r=n,i=d);var o=r.length;return 0===o?1:(o-function(e,t){e=e.toLowerCase(),t=t.toLowerCase();for(var n=new Array,r=0;r<=e.length;r++){for(var i=r,o=0;o<=t.length;o++)if(0==r)n[o]=o;else if(o>0){var a=n[o-1];e.charAt(r-1)!=t.charAt(o-1)&&(a=Math.min(Math.min(a,i),n[o])+1),n[o-1]=i,i=a}r>0&&(n[t.length]=i)}return n[t.length]}(r,i))/o}()}).reduce(function(e,t,n,r){return t>r[e]?n:e},0):-1);if(u>=0){var c=s[u];if(r=c.groupId,a=c.label,"audioinput"===c.kind){i=c.deviceId;var l=n(r,"audiooutput",s);l&&(o=l.deviceId)}else if("audiooutput"===c.kind){o=c.deviceId;var v=n(r,"audioinput",s);v&&(i=v.deviceId)}}r&&(e.browserGroupId=r),a&&(e.browserLabel=a),i&&(e.browserAudioInputId=i),o&&(e.browserAudioOutputId=o)}var d,p}function G(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?h.initialized?"https:"!==location.protocol?Promise.reject(new Error("Your browser needs https for lookup to work")):Promise.all([x(),navigator.mediaDevices.enumerateDevices()]).then(function(e){var t=e[0];return V(t,e[1]),t}):Promise.reject(new Error("Browser integration not initialized")):Promise.reject(new Error("Your browser does not support required media api"))}function X(e){if(""!==e&&("string"==typeof e||e instanceof String))return"true"===e||"1"===e;if("boolean"==typeof e)return e;throw new Error("Illegal/missing argument - boolean or string expected")}function K(e){if(""!==e&&("string"==typeof e||e instanceof String))return parseInt(e);if("number"==typeof e)return e;throw new Error("Illegal/missing argument - number or string expected")}var H,Q=(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=this._events[n?n+e:e];if(!t)return[];if(t.fn)return[t.fn];for(var r=0,i=t.length,o=new Array(i);r<i;r++)o[r]=t[r].fn;return o},s.prototype.listenerCount=function(e){var t=this._events[n?n+e:e];return t?t.fn?1:t.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],v=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),v){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,o),!0;case 6:return l.fn.call(l.context,t,r,i,o,a),!0}for(c=1,u=new Array(v-1);c<v;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var d,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),v){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,i);break;default:if(!u)for(d=1,u=new Array(v-1);d<v;d++)u[d-1]=arguments[d];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?this._events[t=n?n+e:e]&&a(this,t):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(H={exports:{}}),H.exports),Z={Speech_Analysis_TX:{eventType:"txspeech",valueType:"boolean"},Speech_Analysis_RX:{eventType:"rxspeech",valueType:"boolean"},"TX Acoustic Logging Level":{eventType:"txacousticlevel",valueType:"number"},"RX Acoustic Logging Level":{eventType:"rxacousticlevel",valueType:"number"},"TX Acoustic Logging Peak":{eventType:"txacousticpeak",valueType:"number"},"RX Acoustic Logging Peak":{eventType:"rxacousticpeak",valueType:"number"},"Boom Position Guidance OK":{eventType:"armpositionok",valueType:"boolean"},"Bad_Mic_detect Flag":{eventType:"badmic",valueType:"boolean"},"Mute State":{eventType:"mute",valueType:"boolean"}},$=0,ee=function(e,t,n){this.id=$++,this.type=e,this.value=t,this.timestamp=n||Date.now()},te=function(){this.events=[]};te.prototype.add=function(e){var t=this.events.findIndex(function(t){return e.timestamp<t.timestamp});return-1===t&&(t=this.events.length),this.events=this.events.slice(0,t).concat([e],this.events.slice(t)),e},te.prototype.newest=function(e){if(e){for(var t=this.events.length-1;t>0;t--){var n=this.events[t];if(n.type===e)return n}return null}return this.events[this.events.length-1]||null},te.prototype.list=function(e){var t=this.events;if(e){var n=e.eventType,r=e.limit,i=e.interval,o=e.limitEvent,a=e.offsetEvent;o&&(t=t.slice(0,this.events.indexOf(o))),a&&(t=t.slice(this.events.indexOf(a))),(n||i)&&(t=t.filter(function(e){var t=e.timestamp;return!(n&&!n.includes(e.type)||i&&i.start&&t<i.start||i&&i.end&&t>i.end)})),r&&(t=r>0?t.slice(0,r):t.slice(r))}return t},te.prototype.clear=function(){this.events=[]};var ne=function(e){function t(){var t=this;e.call(this),this.events=new te,I("devlog",function(e){if(t.startTime&&!t.stopTime){var n=function(e){if("ID"in e.data)switch(e.data.ID){case"VOLUP TAP":return new ee("volumeup",!0,e.data.TimeStampMs);case"VOLDOWN TAP":return new ee("volumedown",!0,e.data.TimeStampMs)}for(var t in Z)if(t in e.data){var n=Z[t],r=e.data[t];switch(n.valueType){case"boolean":r="true"===r.toLowerCase();break;case"number":r=Number(r)}return new ee(n.eventType,r,e.data.TimeStampMs)}return null}(e);n&&(t.events.add(n),t.emit(n.type,n))}})}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.start=function(){this.startTime=Date.now(),this.stopTime=void 0},t.prototype.stop=function(){this.stopTime=Date.now()},t.prototype.clear=function(){this.events.clear()},t.prototype.getSpeechStatus=function(){var e=this.events.newest("txspeech"),t=this.events.newest("rxspeech"),n=!!e&&e.value,r=!!t&&t.value,i=n&&r;return{isSilent:!n&&!r,isCrosstalking:i,isTXSpeaking:!i&&n,isRXSpeaking:!i&&r}},t.prototype.getSpeechTime=function(e,t){var n={eventType:"txspeech rxspeech"};e&&t&&(n.interval={start:e,end:t});var r,i,o,a=this.events.list(n),s=e||this.startTime||0,u=t||this.stopTime||Date.now(),c=0,l=0,v=0;if(e&&t){var d=this.events.list({eventType:"txspeech",limitEvent:a[0],limit:-1})[0],p=this.events.list({eventType:"rxspeech",limitEvent:a[0],limit:-1})[0];d&&!0===d.value&&a.unshift(new ee("txspeech",!0,s)),p&&!0===p.value&&a.unshift(new ee("rxspeech",!0,s)),a.push(new ee("txspeech",!1,u),new ee("rxspeech",!1,u))}for(var f=0,m=a;f<m.length;f+=1){var _=m[f],g="txspeech"===_.type,h="rxspeech"===_.type;g&&!0===_.value&&!r&&(r=_),h&&!0===_.value&&!i&&(i=_),g&&!1===_.value&&r&&(o?(v+=_.timestamp-o.timestamp,o=void 0,i&&(i=_)):c+=_.timestamp-r.timestamp,r=void 0),h&&!1===_.value&&i&&(o?(v+=_.timestamp-o.timestamp,o=void 0,r&&(r=_)):l+=_.timestamp-i.timestamp,i=void 0),r&&i&&!o&&(o=_,g&&(l+=_.timestamp-i.timestamp),h&&(c+=_.timestamp-r.timestamp))}var y=u-s,E=y-(c+l+v),M=function(e){return+(Math.round(100*e/y+"e+2")+"e-2")};return{totalTime:y,txSpeechTime:c,txSpeechTimePct:M(c),rxSpeechTime:l,rxSpeechTimePct:M(l),crosstalkTime:v,crosstalkTimePct:M(v),silenceTime:E,silenceTimePct:M(E)}},t.prototype.getMutedStatus=function(){var e=this.events.newest("mute");return!!e&&e.value},t.prototype.getMutedCount=function(){return this.events.list({eventType:"mute"}).filter(function(e){return e.value}).length},t.prototype.getBoomArmStatus=function(){var e=this.events.newest("boomarm");return e?e.value:void 0},t.prototype.getBoomArmMisalignedCount=function(){return this.events.list({eventType:"boomarm"}).filter(function(e){return e.value}).length},t.prototype.getVolumeUpCount=function(){return this.events.list({eventType:"volumeup"}).filter(function(e){return e.value}).length},t.prototype.getVolumeDownCount=function(){return this.events.list({eventType:"volumedown"}).filter(function(e){return e.value}).length},t.prototype.getAudioExposure=function(e){return void 0===e&&(e=-15),this.events.list({limit:e,eventType:"rxacousticlevel"})},t.prototype.getAverageAudioExposure=function(e,t){var n=[];if(e&&t){var r=this.events.list({eventType:"rxacousticlevel",interval:{start:e,end:t}});n=this.events.list({eventType:"rxacousticlevel",limitEvent:r[0],limit:-1}).concat(r)}else n=this.events.list({eventType:"rxacousticlevel"});if(0===n.length)return 0;if(1===n.length)return n[0].value;for(var i=0,o=0,a=0;a<n.length-1;a++){var s=n[a],u=n[a+1].timestamp-s.timestamp;i+=u*s.value,o+=u}return Math.round(i/o)},t.prototype.getBackgroundNoise=function(e){return void 0===e&&(e=-15),this.events.list({limit:e,eventType:"txacousticlevel"})},t.prototype.getAverageBackgroundNoise=function(e,t){var n=[];if(e&&t){var r=this.events.list({eventType:"txacousticlevel",interval:{start:e,end:t}});n=this.events.list({eventType:"txacousticlevel",limitEvent:r[0],limit:-1}).concat(r)}else n=this.events.list({eventType:"txacousticlevel"});if(0===n.length)return 0;if(1===n.length)return n[0].value;for(var i=0,o=0,a=0;a<n.length-1;a++){var s=n[a],u=n[a+1].timestamp-s.timestamp;i+=u*s.value,o+=u}return Math.round(i/o)},t}(Q);export{n as apiVersion,e as ErrorCodes,t as ErrorReturnCodes,v as CommandError,s as DeviceFeature,u as RemoteMmiType,c as RemoteMmiSequence,l as RemoteMmiActionInput,p as logLevel,y as init,E as shutdown,I as addEventListener,T as removeEventListener,w as ring,b as offHook,P as onHook,A as mute,O as unmute,S as hold,N as resume,C as setMmiFocus,D as setRemoteMmiLightAction,L as getActiveDevice,R as getDevices,F as _setActiveDeviceId,Y as setActiveDeviceId,U as setBusyLight,j as getInstallInfo,W as trySetDeviceOutput,q as isDeviceSelectedForInput,J as getUserDeviceMediaExt,ne as Analytics};
//# sourceMappingURL=jabra.mjs.map
