var e,t,r="2.1.0.beta1",n=r.includes("beta"),i=["devices","activedevice","getinstallinfo","Version","setmmifocus","setactivedevice2","setbusylight","setremotemmilightaction"];(e=exports.ErrorCodes||(exports.ErrorCodes={}))[e.NoError=0]="NoError",e[e.SSLError=1]="SSLError",e[e.CertError=2]="CertError",e[e.NetworkError=3]="NetworkError",e[e.DownloadError=4]="DownloadError",e[e.ParseError=5]="ParseError",e[e.OtherError=6]="OtherError",e[e.DeviceInfoError=7]="DeviceInfoError",e[e.FileNotAccessible=8]="FileNotAccessible",e[e.FileNotCompatible=9]="FileNotCompatible",e[e.Device_NotFound=10]="Device_NotFound",e[e.Parameter_fail=11]="Parameter_fail",e[e.Authorization_failed=12]="Authorization_failed",e[e.FileNotAvailable=13]="FileNotAvailable",e[e.ConfigParseError=14]="ConfigParseError",e[e.SetSettings_Fail=15]="SetSettings_Fail",e[e.Device_Reboot=16]="Device_Reboot",e[e.Device_ReadFail=17]="Device_ReadFail",e[e.Device_NotReady=18]="Device_NotReady",e[e.FilePartiallyCompatible=19]="FilePartiallyCompatible",(t=exports.ErrorReturnCodes||(exports.ErrorReturnCodes={}))[t.Return_Ok=0]="Return_Ok",t[t.Device_Unknown=1]="Device_Unknown",t[t.Device_Invalid=2]="Device_Invalid",t[t.Not_Supported=3]="Not_Supported",t[t.Return_ParameterFail=4]="Return_ParameterFail",t[t.ProtectedSetting_Write=5]="ProtectedSetting_Write",t[t.No_Information=6]="No_Information",t[t.NetworkRequest_Fail=7]="NetworkRequest_Fail",t[t.Device_WriteFail=8]="Device_WriteFail",t[t.Device_ReadFails=9]="Device_ReadFails",t[t.No_FactorySupported=10]="No_FactorySupported",t[t.System_Error=11]="System_Error",t[t.Device_BadState=12]="Device_BadState",t[t.FileWrite_Fail=13]="FileWrite_Fail",t[t.File_AlreadyExists=14]="File_AlreadyExists",t[t.File_Not_Accessible=15]="File_Not_Accessible",t[t.Firmware_UpToDate=16]="Firmware_UpToDate",t[t.Firmware_Available=17]="Firmware_Available",t[t.Return_Async=18]="Return_Async",t[t.Invalid_Authorization=19]="Invalid_Authorization",t[t.FWU_Application_Not_Available=20]="FWU_Application_Not_Available",t[t.Device_AlreadyConnected=21]="Device_AlreadyConnected",t[t.Device_NotConnected=22]="Device_NotConnected",t[t.CannotClear_DeviceConnected=23]="CannotClear_DeviceConnected",t[t.Device_Rebooted=24]="Device_Rebooted",t[t.Upload_AlreadyInProgress=25]="Upload_AlreadyInProgress",t[t.Download_AlreadyInProgress=26]="Download_AlreadyInProgress";var o,a,s,u,c=function(e){function t(t,r,n){e.call(this,"Command "+t+" failed with error  message "+r+" and details: "+JSON.stringify(n||{})),this.command=t,this.errmessage=r,this.data=n,this.name="CommandError"}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),l=new Map;["mute","unmute","device attached","device detached","acceptcall","endcall","reject","flash","online","offline","linebusy","lineidle","redial","key0","key1","key2","key3","key4","key5","key6","key7","key8","key9","keyStar","keyPound","keyClear","Online","speedDial","voiceMail","LineBusy","outOfRange","intoRange","pseudoAcceptcall","pseudoEndcall","button1","button2","button3","volumeUp","volumeDown","fireAlarm","jackConnection","jackDisConnection","qdConnection","qdDisconnection","headsetConnection","headsetDisConnection","devlog","busylight","hearThrough","batteryStatus","gnpButton","mmi","error"].forEach(function(e){return l.set(e,[])}),(o=exports.DeviceFeature||(exports.DeviceFeature={}))[o.BusyLight=1e3]="BusyLight",o[o.FactoryReset=1001]="FactoryReset",o[o.PairingList=1002]="PairingList",o[o.RemoteMMI=1003]="RemoteMMI",o[o.MusicEqualizer=1004]="MusicEqualizer",o[o.EarbudInterconnectionStatus=1005]="EarbudInterconnectionStatus",o[o.StepRate=1006]="StepRate",o[o.HeartRate=1007]="HeartRate",o[o.RRInterval=1008]="RRInterval",o[o.RingtoneUpload=1009]="RingtoneUpload",o[o.ImageUpload=1010]="ImageUpload",o[o.NeedsExplicitRebootAfterOta=1011]="NeedsExplicitRebootAfterOta",o[o.NeedsToBePutIncCradleToCompleteFwu=1012]="NeedsToBePutIncCradleToCompleteFwu",o[o.RemoteMMIv2=1013]="RemoteMMIv2",o[o.Logging=1014]="Logging",o[o.PreferredSoftphoneListInDevice=1015]="PreferredSoftphoneListInDevice",o[o.VoiceAssistant=1016]="VoiceAssistant",o[o.PlayRingtone=1017]="PlayRingtone",(a=exports.RemoteMmiType||(exports.RemoteMmiType={}))[a.MMI_TYPE_MFB=0]="MMI_TYPE_MFB",a[a.MMI_TYPE_VOLUP=1]="MMI_TYPE_VOLUP",a[a.MMI_TYPE_VOLDOWN=2]="MMI_TYPE_VOLDOWN",a[a.MMI_TYPE_VCB=3]="MMI_TYPE_VCB",a[a.MMI_TYPE_APP=4]="MMI_TYPE_APP",a[a.MMI_TYPE_TR_FORW=5]="MMI_TYPE_TR_FORW",a[a.MMI_TYPE_TR_BACK=6]="MMI_TYPE_TR_BACK",a[a.MMI_TYPE_PLAY=7]="MMI_TYPE_PLAY",a[a.MMI_TYPE_MUTE=8]="MMI_TYPE_MUTE",a[a.MMI_TYPE_HOOK_OFF=9]="MMI_TYPE_HOOK_OFF",a[a.MMI_TYPE_HOOK_ON=10]="MMI_TYPE_HOOK_ON",a[a.MMI_TYPE_BLUETOOTH=11]="MMI_TYPE_BLUETOOTH",a[a.MMI_TYPE_JABRA=12]="MMI_TYPE_JABRA",a[a.MMI_TYPE_BATTERY=13]="MMI_TYPE_BATTERY",a[a.MMI_TYPE_PROG=14]="MMI_TYPE_PROG",a[a.MMI_TYPE_LINK=15]="MMI_TYPE_LINK",a[a.MMI_TYPE_ANC=16]="MMI_TYPE_ANC",a[a.MMI_TYPE_LISTEN_IN=17]="MMI_TYPE_LISTEN_IN",a[a.MMI_TYPE_DOT3=18]="MMI_TYPE_DOT3",a[a.MMI_TYPE_DOT4=19]="MMI_TYPE_DOT4",a[a.MMI_TYPE_ALL=255]="MMI_TYPE_ALL",(s=exports.RemoteMmiSequence||(exports.RemoteMmiSequence={}))[s.MMI_LED_SEQUENCE_OFF=0]="MMI_LED_SEQUENCE_OFF",s[s.MMI_LED_SEQUENCE_ON=1]="MMI_LED_SEQUENCE_ON",s[s.MMI_LED_SEQUENCE_SLOW=2]="MMI_LED_SEQUENCE_SLOW",s[s.MMI_LED_SEQUENCE_FAST=3]="MMI_LED_SEQUENCE_FAST",(u=exports.RemoteMmiActionInput||(exports.RemoteMmiActionInput={}))[u.MMI_ACTION_UP=1]="MMI_ACTION_UP",u[u.MMI_ACTION_DOWN=2]="MMI_ACTION_DOWN",u[u.MMI_ACTION_TAP=4]="MMI_ACTION_TAP",u[u.MMI_ACTION_DOUBLE_TAP=8]="MMI_ACTION_DOUBLE_TAP",u[u.MMI_ACTION_PRESS=16]="MMI_ACTION_PRESS",u[u.MMI_ACTION_LONG_PRESS=32]="MMI_ACTION_LONG_PRESS",u[u.MMI_ACTION_X_LONG_PRESS=64]="MMI_ACTION_X_LONG_PRESS",exports.logLevel=2;var d=new(function(){function e(){}return e.prototype.trace=function(e){exports.logLevel>=4&&console.log(e)},e.prototype.info=function(e){exports.logLevel>=3&&console.log(e)},e.prototype.warn=function(e){exports.logLevel>=2&&console.warn(e)},e.prototype.error=function(e){exports.logLevel>=1&&console.error(e)},e}()),p=Math.random().toString(36).substr(2,9),v=new Map,m=1,f={};function g(e){return Array.isArray(e)?[].concat(new Set([].concat.apply([],e.map(function(e){return g(e)})))):e instanceof RegExp?Array.from(l.keys()).filter(function(t){return e.test(t)}):l.has(e)?[e]:(d.warn("Unknown event "+e+" ignored when adding/removing eventlistener"),[])}function _(e,t){g(e).map(function(e){var r=l.get(e);r.find(function(e){return e===t})||r.push(t)})}function h(){return I("getactivedevice")}function E(){return I("getdevices")}function M(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=!0),!(!n||n&&f.initialized))throw new Error("Browser integration not initialized");var i={direction:"jabra-headset-extension-from-page-script",message:e,args:t||{},requestId:(m++).toString(),apiClientId:p,version_jsapi:r};d.trace("Sending command to content script: "+JSON.stringify(i)),window.postMessage(i,"*")}function I(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=!0),!n||n&&f.initialized){var i=(m++).toString();return new Promise(function(n,o){v.set(i,{cmd:e,resolve:n,reject:o});var a={direction:"jabra-headset-extension-from-page-script",message:e,args:t||{},requestId:i,apiClientId:p,version_jsapi:r};d.trace("Sending command to content script expecting result: "+JSON.stringify(a)),window.postMessage(a,"*")})}return Promise.reject(new Error("Browser integration not initialized"))}function y(e,t){function r(e,t,r){return r.find(function(r){return r.groupId==e&&r.kind==t})}if(e&&e.deviceName){var n=void 0,i=void 0,o=void 0,a=void 0,s=t.filter(function(e){return e.label&&e.label.toLowerCase().includes("jabra")&&("audioinput"===e.kind||"audiooutput"===e.kind)}),u=(p=e.deviceName,1==(v=s.map(function(e){return e.label})).length?0:v.length>0?v.map(function(e){if(e.includes("("+p+")"))return 1;var t=e.indexOf(" - "),r=t>=0?e.substring(t+3):e;return function(e,t){var n=p,i=r;p.length<r.length&&(n=r,i=p);var o=n.length;return 0===o?1:(o-function(e,t){e=e.toLowerCase(),t=t.toLowerCase();for(var r=new Array,n=0;n<=e.length;n++){for(var i=n,o=0;o<=t.length;o++)if(0==n)r[o]=o;else if(o>0){var a=r[o-1];e.charAt(n-1)!=t.charAt(o-1)&&(a=Math.min(Math.min(a,i),r[o])+1),r[o-1]=i,i=a}n>0&&(r[t.length]=i)}return r[t.length]}(n,i))/o}()}).reduce(function(e,t,r,n){return t>n[e]?r:e},0):-1);if(u>=0){var c=s[u];if(n=c.groupId,a=c.label,"audioinput"===c.kind){i=c.deviceId;var l=r(n,"audiooutput",s);l&&(o=l.deviceId)}else if("audiooutput"===c.kind){o=c.deviceId;var d=r(n,"audioinput",s);d&&(i=d.deviceId)}}n&&(e.browserGroupId=n),a&&(e.browserLabel=a),i&&(e.browserAudioInputId=i),o&&(e.browserAudioOutputId=o)}var p,v}function T(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?f.initialized?"https:"!==location.protocol?Promise.reject(new Error("Your browser needs https for lookup to work")):Promise.all([h(),navigator.mediaDevices.enumerateDevices()]).then(function(e){var t=e[0];return y(t,e[1]),t}):Promise.reject(new Error("Browser integration not initialized")):Promise.reject(new Error("Your browser does not support required media api"))}function w(e){if(""!==e&&("string"==typeof e||e instanceof String))return"true"===e||"1"===e;if("boolean"==typeof e)return e;throw new Error("Illegal/missing argument - boolean or string expected")}function P(e){if(""!==e&&("string"==typeof e||e instanceof String))return parseInt(e);if("number"==typeof e)return e;throw new Error("Illegal/missing argument - number or string expected")}var A=function(){this.listeners=new Map};A.prototype.addEventListener=function(e,t){var r=this.listeners.get(e)||[];this.listeners.set(e,r.concat([t]))},A.prototype.on=function(e,t){this.addEventListener(e,t)},A.prototype.removeEventListener=function(e,t){var r=this.listeners.get(e)||[];this.listeners.set(e,r.filter(function(e){return e!==t}))},A.prototype.off=function(e,t){this.removeEventListener(e,t)},A.prototype.emit=function(e,t){var r=this.listeners.get(e);r&&r.forEach(function(e){e(t)})};var b={Speech_Analysis_TX:{eventType:"txspeech",valueType:"boolean"},Speech_Analysis_RX:{eventType:"rxspeech",valueType:"boolean"},"TX Acoustic Logging Level":{eventType:"txacousticlevel",valueType:"number"},"RX Acoustic Logging Level":{eventType:"rxacousticlevel",valueType:"number"},"TX Acoustic Logging Peak":{eventType:"txacousticpeak",valueType:"number"},"RX Acoustic Logging Peak":{eventType:"rxacousticpeak",valueType:"number"},"Boom Position Guidance OK":{eventType:"armpositionok",valueType:"boolean"},"Bad_Mic_detect Flag":{eventType:"badmic",valueType:"boolean"},"Mute State":{eventType:"mute",valueType:"boolean"}},x=function(e,t,r){this.type=e,this.value=t,this.timestamp=r||Date.now()},S=function(){this.events=[]};S.prototype.add=function(e){var t=this.events.findIndex(function(t){return e.timestamp<t.timestamp});return-1===t&&(t=this.events.length),this.events=this.events.slice(0,t).concat([e],this.events.slice(t)),e},S.prototype.newest=function(e){if(e){for(var t=this.events.length-1;t>0;t--){var r=this.events[t];if(r.type===e)return r}return null}return this.events[this.events.length-1]||null},S.prototype.list=function(e){var t=this.events;if(e){var r=e.eventType,n=e.limit,i=e.interval,o=e.limitEvent,a=e.offsetEvent;o&&(t=t.slice(0,this.events.indexOf(o))),a&&(t=t.slice(this.events.indexOf(a))),(r||i)&&(t=t.filter(function(e){var t=e.timestamp;return!(r&&!r.includes(e.type)||i&&i.start&&t<i.start||i&&i.end&&t>i.end)})),n&&(t=n>0?t.slice(0,n):t.slice(n))}return t},S.prototype.clear=function(){this.events=[]};var O=function(e){function t(){var t=this;e.call(this),this.events=new S,_("devlog",function(e){if(t.startTime&&!t.stopTime){var r=function(e){if("ID"in e.data)switch(e.data.ID){case"VOLUP TAP":return new x("volumeup",!0,e.data.TimeStampMs);case"VOLDOWN TAP":return new x("volumedown",!0,e.data.TimeStampMs)}for(var t in b)if(t in e.data){var r=b[t],n=e.data[t];switch(r.valueType){case"boolean":n="true"===n.toLowerCase();break;case"number":n=Number(n)}return new x(r.eventType,n,e.data.TimeStampMs)}return null}(e);r&&(t.events.add(r),t.emit(r.type,r))}})}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.start=function(){this.clear(),this.startTime=Date.now(),this.stopTime=void 0},t.prototype.stop=function(){this.stopTime=Date.now()},t.prototype.clear=function(){this.events.clear()},t.prototype.getSpeechStatus=function(){var e=this.events.newest("txspeech"),t=this.events.newest("rxspeech"),r=!!e&&e.value,n=!!t&&t.value,i=r&&n;return{isSilent:!r&&!n,isCrosstalking:i,isTXSpeaking:!i&&r,isRXSpeaking:!i&&n}},t.prototype.getSpeechTime=function(e,t){var r={eventType:"txspeech rxspeech"};e&&t&&(r.interval={start:e,end:t});var n,i,o,a=this.events.list(r),s=e||this.startTime||0,u=t||this.stopTime||Date.now(),c=0,l=0,d=0;if(e&&t){var p=this.events.list({eventType:"txspeech",limitEvent:a[0],limit:-1})[0],v=this.events.list({eventType:"rxspeech",limitEvent:a[0],limit:-1})[0];p&&!0===p.value&&a.unshift(new x("txspeech",!0,s)),v&&!0===v.value&&a.unshift(new x("rxspeech",!0,s)),a.push(new x("txspeech",!1,u),new x("rxspeech",!1,u))}for(var m=0,f=a;m<f.length;m+=1){var g=f[m],_="txspeech"===g.type,h="rxspeech"===g.type;_&&!0===g.value&&!n&&(n=g),h&&!0===g.value&&!i&&(i=g),_&&!1===g.value&&n&&(o?(d+=g.timestamp-o.timestamp,o=void 0,i&&(i=g)):c+=g.timestamp-n.timestamp,n=void 0),h&&!1===g.value&&i&&(o?(d+=g.timestamp-o.timestamp,o=void 0,n&&(n=g)):l+=g.timestamp-i.timestamp,i=void 0),n&&i&&!o&&(o=g,_&&(l+=g.timestamp-i.timestamp),h&&(c+=g.timestamp-n.timestamp))}var E=u-s,M=E-(c+l+d),I=function(e){return+(Math.round(100*e/E+"e+2")+"e-2")};return{totalTime:E,txSpeechTime:c,txSpeechTimePct:I(c),rxSpeechTime:l,rxSpeechTimePct:I(l),crosstalkTime:d,crosstalkTimePct:I(d),silenceTime:M,silenceTimePct:I(M)}},t.prototype.getMutedStatus=function(){var e=this.events.newest("mute");return!!e&&e.value},t.prototype.getMutedCount=function(){return this.events.list({eventType:"mute"}).filter(function(e){return e.value}).length},t.prototype.getBoomArmStatus=function(){var e=this.events.newest("boomarm");return e?e.value:void 0},t.prototype.getBoomArmMisalignedCount=function(){return this.events.list({eventType:"boomarm"}).filter(function(e){return e.value}).length},t.prototype.getVolumeUpCount=function(){return this.events.list({eventType:"volumeup"}).filter(function(e){return e.value}).length},t.prototype.getVolumeDownCount=function(){return this.events.list({eventType:"volumedown"}).filter(function(e){return e.value}).length},t.prototype.getAudioExposure=function(e){return void 0===e&&(e=-15),this.events.list({limit:e,eventType:"rxacousticlevel"})},t.prototype.getAverageAudioExposure=function(e,t){return this.getAverageAcousticLevel("rxacousticlevel",e,t)},t.prototype.getBackgroundNoise=function(e){return void 0===e&&(e=-15),this.events.list({limit:e,eventType:"txacousticlevel"})},t.prototype.getAverageBackgroundNoise=function(e,t){return this.getAverageAcousticLevel("txacousticlevel",e,t)},t.prototype.getAverageAcousticLevel=function(e,t,r){var n=[];if(t&&r){var i=this.events.list({eventType:e,interval:{start:t,end:r}});n=this.events.list({eventType:e,limitEvent:i[0],limit:-1}).concat(i)}else n=this.events.list({eventType:e});if(0===n.length)return 0;if(1===n.length)return n[0].value;for(var o=0,a=0,s=0;s<n.length-1;s++){var u=n[s],c=n[s+1].timestamp-u.timestamp;o+=c*u.value,a+=c}return Math.round(o/a)},t}(A);exports.apiVersion=r,exports.CommandError=c,exports.init=function(){return new Promise(function(e,t){if(!/Chrome/.test(navigator.userAgent)||!/Google Inc/.test(navigator.vendor))return t(new Error("Jabra Browser Integration: Only supported by <a href='https://google.com/chrome'>Google Chrome</a>."));if(f.initialized||f.initializing)return t(new Error("Jabra Browser Integration already initialized"));f.initializing=!0,v.clear();var o=!0;function a(e,t){var r=l.get(e);r?r.forEach(function(e){e(t)}):d.error("Unexpected unknown eventName: "+e)}function s(e){var t;if(e)t=v.get(e),v.delete(e);else if(1===v.size){var r=v.entries().next().value;t=r[1],v.delete(r[0])}else t=void 0;var n=v.size;return n>10&&n%10==0&&d.warn("Memory leak found - Request result map is getting too large (size #"+n+")"),t}f.eventCallback=function(n){if(n.source===window&&n.data.direction&&"jabra-headset-extension-from-content-script"===n.data.direction){var u=n.data.apiClientId||"",v=n.data.requestId||"";if(p===u||""===u)if(d.trace("Receiving event from content script: "+JSON.stringify(n.data)),"na"===n.data.message&&delete n.data.message,n.data.message&&n.data.message.startsWith("Error:")&&(n.data.error=n.data.message,delete n.data.message),n.data.message){d.trace("Got message: "+JSON.stringify(n.data));var m=n.data.message.substring(7);if(m.startsWith("logLevel"))return exports.logLevel=parseInt(n.data.message.substring(16)),void d.trace("Logger set to level "+exports.logLevel);var f=i.findIndex(function(e){return m.startsWith(e)});if(f>=0){("getinstallinfo"===m||m.startsWith("Version "))&&(n.data.data||(n.data.data={}),n.data.data.version_jsapi=r),"getinstallinfo"===m&&(n.data.data.installationOk=!((P=[(w=n.data.data).version_browserextension,w.version_chromehost,w.version_jsapi]).some(function(e){return!e})||!w.version_nativesdk||!P.map(function(e){var t=e.lastIndexOf("beta");return t>=0&&e.length>t+4?e.substr(t+4):void 0}).filter(function(e){return e}).every(function(e,t,r){return e===r[0]})));var g=s(v);if(g){var _;if(n.data.data)_=n.data.data;else{var h=m.substring(i[f].length+1);_={},h&&(_.legacy_result=h)}g.resolve(_)}else{var E="Result target information missing for message "+n.data.message+". This is likely due to some software components that have not been updated or a software bug. Please upgrade extension and/or chromehost";d.error(E),a("error",{error:E,message:n.data.message})}}else{if(!l.has(m))return d.warn("Unknown message: "+n.data.message),void a("error",{error:"Unknown message: ",message:n.data.message});var M=JSON.parse(JSON.stringify(n.data));delete M.direction,delete M.apiClientId,delete M.requestId,M.message=m,a(m,M)}if(o)return o=!1,e()}else if(n.data.error){d.error("Got error: "+n.data.error);var I=n.data.error.substring(7),y=s(v);if(y)y.reject(new c(y.cmd,I,n.data.data));else{var T=JSON.parse(JSON.stringify(n.data));delete T.direction,delete T.apiClientId,delete T.requestId,T.error=I,a("error",T)}if(o)return o=!1,t(new Error(n.data.error))}}var w,P},window.addEventListener("message",f.eventCallback),setTimeout(function(){I("getversion",null,!1).then(function(e){var t="string"==typeof e||e instanceof String?e:JSON.stringify(e,null,2);d.trace("getversion returned successfully with : "+t),M("logLevel",null,!1)}).catch(function(e){d.error(e)})},1e3),setTimeout(function(){!0===o&&(o=!1,t(new Error("Jabra Browser Integration: You need to use this <a href='https://chrome.google.com/webstore/detail/"+(n?"igcbbdnhomedfadljgcmcfpdcoonihfe":"okpeabepajdgiepelmhkfhkjlhhmofma")+"'>Extension</a> and then reload this page")))},5e3),f.initialized=!0,f.initializing=!1})},exports.shutdown=function(){return f.initialized?(window.removeEventListener("message",f.eventCallback),f.eventCallback=void 0,v.clear(),m=1,f.initialized=!1,l.forEach(function(e,t){}),Promise.resolve()):Promise.reject(new Error("Browser integration not initialized"))},exports.addEventListener=_,exports.removeEventListener=function(e,t){g(e).map(function(e){var r=l.get(e),n=r.findIndex(function(e){return e===t});n>=0&&r.splice(n,1)})},exports.ring=function(){M("ring")},exports.offHook=function(){M("offhook")},exports.onHook=function(){M("onhook")},exports.mute=function(){M("mute")},exports.unmute=function(){M("unmute")},exports.hold=function(){M("hold")},exports.resume=function(){M("resume")},exports.setMmiFocus=function(e,t){return I("setmmifocus",{type:P(e),capture:w(t)})},exports.setRemoteMmiLightAction=function(e,t,r){return I("setremotemmilightaction",{type:P(e),color:function(e){if(""!==e&&("string"==typeof e||e instanceof String)){var t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]}if("number"==typeof e)return[e>>16&255,e>>8&255,255&e];if(Array.isArray(e)){if(3!=e.length)throw new Error("Illegal argument - wrong dimension of number array (3 expected)");return e}throw new Error("Illegal/missing argument - number array or hex string expected")}(t),effect:P(r)})},exports.getActiveDevice=function(e){return void 0===e&&(e=!1),w(e)?T():h()},exports.getDevices=function(e){return void 0===e&&(e=!1),w(e)?navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?f.initialized?"https:"!==location.protocol?Promise.reject(new Error("Your browser needs https for lookup to work")):Promise.all([E(),navigator.mediaDevices.enumerateDevices()]).then(function(e){var t=e[0],r=e[1];return t.forEach(function(e){y(e,r)}),t}):Promise.reject(new Error("Browser integration not initialized")):Promise.reject(new Error("Your browser does not support required media api")):E()},exports._setActiveDeviceId=function(e){var t=P(e);M("setactivedevice "+e.toString(),{id:t})},exports.setActiveDeviceId=function(e){return I("setactivedevice2",{id:P(e)})},exports.setBusyLight=function(e){return I("setbusylight",{busy:w(e)})},exports.getInstallInfo=function(){return I("getinstallinfo")},exports.trySetDeviceOutput=function(e,t){return e&&t?"function"!=typeof e.setSinkId?Promise.reject(new Error("Your browser does not support required Audio Output Devices API")):e.setSinkId(t.browserAudioOutputId).then(function(){return e.sinkId===t.browserAudioOutputId}):Promise.reject(new Error("Call to trySetDeviceOutput has argument(s) missing"))},exports.isDeviceSelectedForInput=function(e,t){if(!e||!t)throw Error("Call to isDeviceSelectedForInput has argument(s) missing");for(var r=e.getAudioTracks(),n=0,i=r.length;n<i;n++)if(r[n].getCapabilities().deviceId!==t.browserAudioInputId)return!1;return!0},exports.getUserDeviceMediaExt=function(e){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return Promise.reject(new Error("Your browser does not support required media api"));if(!f.initialized)return Promise.reject(new Error("Browser integration not initialized"));if("https:"!==location.protocol&&d.warn("This function needs to run under https for best UX experience (persisted permissions)"),null!=e&&"object"!=typeof e)return Promise.reject(new Error("Optional constraints parameter must be an object"));function t(e,r){if(null!=r&&"object"==typeof e){var n={};for(var i in r)n[i]=r[i];for(var i in e)n[i]=t(e[i],r[i]);return n}return e}return navigator.mediaDevices.getUserMedia(t({audio:!0},e)).then(function(r){return T().then(function(n){return r.getTracks().forEach(function(e){e.stop()}),n&&n.browserAudioInputId?navigator.mediaDevices.getUserMedia(t({audio:{deviceId:n.browserAudioInputId}},e)).then(function(e){return{stream:e,deviceInfo:n}}):Promise.reject(new Error("Could not find a Jabra device with a microphone"))})})},exports.Analytics=O;
//# sourceMappingURL=jabra.browser.integration-3.0.js.map
